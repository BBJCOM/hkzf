<html>

<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="viewport" content="initial-scale=1.0, user-scalable=no" />
	<style type="text/css">
		body,
		html,
		#allmap {
			width: 100%;
			height: 100%;
			overflow: hidden;
			margin: 0;
			font-family: "微软雅黑";
		}
	</style>
	<script type="text/javascript" src="http://api.map.baidu.com/api?v=2.0&ak=hh8FOwhq6hmz5PV1g8TwM7dwuXW9IS6Z">
	</script>
	<title>IP定位获取当前城市</title>
</head>

<body>
	<div id="allmap"></div>
</body>

</html>
<script type="text/javascript">
	// 2. 通过回调函数获取当前城市信息
	function myFun(result) {
		var cityName = result.name;
		alert("当前定位城市:" + cityName);
	}
	// 1.获取当前城市的实例
	var myCity = new BMap.LocalCity();
	myCity.get(myFun);
</script>